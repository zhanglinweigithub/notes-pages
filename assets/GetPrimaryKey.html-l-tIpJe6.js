import{_ as s,o as a,c as e,a as i}from"./app-Vg0IViah.js";const l={},n=i(`<h1 id="mybatis获取主键的几种方式" tabindex="-1"><a class="header-anchor" href="#mybatis获取主键的几种方式"><span>MyBatis获取主键的几种方式</span></a></h1><h2 id="一、方式一-配置" tabindex="-1"><a class="header-anchor" href="#一、方式一-配置"><span>一、方式一：配置</span></a></h2><p>我们需要在<code>Mapper.xml</code>中进行配置，<code>useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;</code></p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">insert</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> id</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;insertUser1&quot;</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> useGeneratedKeys</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;true&quot;</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> keyProperty</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;id&quot;</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">INSERT INTO t_user (name,age,salary,sex) VALUES (#{name},#{age},#{salary},#{sex})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">insert</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>useGeneratedKeys</code>：设置为<code>true</code></li><li><code>keyProperty</code>：参数对象中的主键属性名称，最后插入成功之后，<code>mybatis</code>会通过反射将自增值设置给 <code>keyProperty</code>指定的这个属性</li></ul><h2 id="二、方式二-插入后查询" tabindex="-1"><a class="header-anchor" href="#二、方式二-插入后查询"><span>二、方式二：插入后查询</span></a></h2><p>插入后查询获取主键</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">insert</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> id</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;insertUser2&quot;</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> parameterType</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;com.javacode2018.chat04.demo1.model.UserModel&quot;</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">selectKey</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> keyProperty</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;id&quot;</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> order</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;AFTER&quot;</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> resultType</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;long&quot;</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">	SELECT LAST_INSERT_ID()</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">selectKey</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">	INSERT INTO t_user (name,age,salary,sex) VALUES (#{name},#{age},#{salary},#{sex})</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">insert</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>selectKey</code> 元素有3个属性需要指定</p><ul><li><code>keyProperty</code>：参数对象中的主键属性名称，最后插入成功之后，<code>mybatis</code>会通过反射将自增值设置给 <code>keyProperty</code>指定的这个属性</li><li><code>order</code>：指定<code>selectKey</code>元素中的<code>sql</code>是在插入之前运行还是插入之后运行，可选值 （<code>BEFORE</code>|<code>AFTER</code>）</li><li><code>resultType</code>：<code>keyProperty</code>指定的属性对应的类型，如上面的<code>id</code>对应的类型是 <code>java.lang.Long</code> ， 我们直接写的是别名 <code>long</code></li></ul>`,10),r=[n];function o(d,t){return a(),e("div",null,r)}const p=s(l,[["render",o],["__file","GetPrimaryKey.html.vue"]]),k=JSON.parse('{"path":"/Use/Java/MyBatisPlus/GetPrimaryKey.html","title":"MyBatis获取主键的几种方式","lang":"zh-CN","frontmatter":{"category":"使用篇"},"headers":[{"level":2,"title":"一、方式一：配置","slug":"一、方式一-配置","link":"#一、方式一-配置","children":[]},{"level":2,"title":"二、方式二：插入后查询","slug":"二、方式二-插入后查询","link":"#二、方式二-插入后查询","children":[]}],"git":{"createdTime":1708330205000,"updatedTime":1708873062000,"contributors":[{"name":"zhanglinwei","email":"3498729975@qq.com","commits":2}]},"readingTime":{"minutes":0.89,"words":268},"filePathRelative":"Use/Java/MyBatisPlus/GetPrimaryKey.md","localizedDate":"2024年2月19日"}');export{p as comp,k as data};
