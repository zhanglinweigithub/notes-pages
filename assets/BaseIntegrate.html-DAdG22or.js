import{_ as D,r as o,o as p,c,g as k,w as i,a as e,f as a,e as s}from"./app-Vg0IViah.js";const d={},t=e(`<h1 id="springboot前后端分离整合" tabindex="-1"><a class="header-anchor" href="#springboot前后端分离整合"><span>SpringBoot前后端分离整合</span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>本文内容基于<code>SpringBoot2、Shiro1.9.0</code> 的单体架构</p><p>示例源码：https://gitee.com/linwei-zhang/vue-admin</p></div><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">dependency</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">	&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">groupId</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">org.apache.shiro</span><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">groupId</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">	&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">artifactId</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">shiro-spring-boot-web-starter</span><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">artifactId</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">	&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">version</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">1.9.0</span><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">version</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">dependency</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="一、shiro提供的过滤器" tabindex="-1"><a class="header-anchor" href="#一、shiro提供的过滤器"><span>一、Shiro提供的过滤器</span></a></h2><details class="hint-container details"><summary>详情</summary><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> enum</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> DefaultFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    // 匿名拦截器，即不需要登录即可访问</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    anon(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">AnonymousFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    // 必须登录认证才能访问（remember me也不行，必须登录）</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    authc(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">FormAuthenticationFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    authcBasic(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">BasicHttpAuthenticationFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    authcBearer(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">BearerHttpAuthenticationFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    // 退出拦截器，主要属性：redirectUrl：退出成功后重定向的地址</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    logout(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">LogoutFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    noSessionCreation(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">NoSessionCreationFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    perms(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">PermissionsAuthorizationFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    port(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">PortFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    rest(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">HttpMethodPermissionFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    roles(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">RolesAuthorizationFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    ssl(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">SslFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    // 用户拦截器，用户已经身份验证/记住我登录的都可</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    user(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">UserFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    invalidRequest(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">InvalidRequestFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    // ...</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><ul><li>我们无需关系其它，只需要自定义一个拦截器，所有需要登录访问的都走我们自定义的拦截器即可</li><li>其余无需登录直接使用<code>anon</code>即可</li></ul><h2 id="二、整合" tabindex="-1"><a class="header-anchor" href="#二、整合"><span>二、整合</span></a></h2><p>整体步骤如下：</p><ol><li><code>.yaml</code>配置文件定义路径拦截规则</li><li>实现<code>AuthenticationToken</code>，重写账号密码返回方法</li><li>继承<code>AuthenticatingFilter</code>自定义拦截逻辑</li><li>继承<code>AuthorizingRealm</code>，自定义认证、授权逻辑</li><li>创建<code>ShiroProperties</code>类，接收配置文件内容</li><li>创建Shiro配置类，注入我们自己的过滤器和路径拦截规则（有需要的也可以自定义<code>Cookie</code>、<code>SessionManager</code>等）</li></ol>`,9),C=s("div",{class:"language-yaml line-numbers-mode","data-ext":"yml","data-title":"yml"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"shiro"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},":")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"  # anon: 无需登录、认证")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"  # auth: 必须登录才能访问，我自定义的")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"  filter-chain-definitions"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},":")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    - "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},"/user/login:anon")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    - "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},"/user/getCaptcha:anon")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    - "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},"/**:auth")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),h=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," * 自定义认证token")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"@"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Data")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"@"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Builder")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"public"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," class"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthToken"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," implements"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthenticationToken"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    private"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," String"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," userName"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    private"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," String"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," password"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    private"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," SysUser"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," loginUser"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," Object"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," getPrincipal"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," this"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"userName"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," Object"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," getCredentials"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," this"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"password"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),y=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," * 自定义auth过滤器")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"public"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," class"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthFilter"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," extends"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthenticatingFilter"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    private"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," final"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," String"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," TOKEN_HEADER_KEY"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"Authorization"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 创建登录Token（在调用executeLogin时才会调用，基本没啥用）")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    protected"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthenticationToken"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," createToken"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"ServletRequest"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," request"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"ServletResponse"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," response"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"throws"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," Exception"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," null"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 访问被拒绝时")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    protected"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," boolean"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," onAccessDenied"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"ServletRequest"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," request"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"ServletResponse"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," response"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"throws"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," Exception"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        SysUser"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," principal"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = (SysUser) "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"SecurityUtils"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getSubject"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"()."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getPrincipal"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        if"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," (principal != "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"null"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"            SecurityUtils"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getSubject"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"()."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"logout"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"        }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"        ((HttpServletResponse) response)."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"sendError"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#B5CEA8","--shiki-dark":"#B5CEA8"}},"401"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"未登录"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},");")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," false"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 是否允许访问")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    protected"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," boolean"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," isAccessAllowed"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"ServletRequest"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," request"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"ServletResponse"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," response"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Object"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," mappedValue"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        if"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," (((HttpServletRequest) request)."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getMethod"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"()."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"equals"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"RequestMethod"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"OPTIONS"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"name"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"())) {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"            return"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," true"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"        }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // shiro默认使用Cookie+session判断是否登录, 若想纯靠header判断, 可删除此行")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        boolean"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," accessAllowed"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"super"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"isAccessAllowed"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(request, response, mappedValue);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        if"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," (accessAllowed){")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"            String"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," token"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = ((HttpServletRequest) request)."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getHeader"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(TOKEN_HEADER_KEY);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"            return"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," StringUtils"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"isNoneBlank"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(token) && "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"LoginUtil"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"isLogin"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(token);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"        }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," false"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),u=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," * 自定义login认证")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"public"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," class"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," LoginRealm"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," extends"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthorizingRealm"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Autowired")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    private"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," SysUserMapper"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," sysUserMapper"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 授权")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"@param"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," principalCollection")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"@return")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    protected"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthorizationInfo"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," doGetAuthorizationInfo"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"PrincipalCollection"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," principalCollection"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // 如果你有多个Realm，这里需要注意，后面再说")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        SysUser"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," principal"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = (SysUser) "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"principalCollection"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getPrimaryPrincipal"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        SimpleAuthorizationInfo"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," info"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," SimpleAuthorizationInfo"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // 这里的角色和权限可以从数据库中查询")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"        info"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"addRoles"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"admin"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"        info"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"addStringPermissions"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"user:delete"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"        ")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // 或者在认证时直接把角色、权限信息查出来，这里直接设置就不用查询数据库了")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // SysUser userPrincipal = (SysUser) SecurityUtils.getSubject().getPrincipal();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // info.addRoles(userPrincipal.getRoleCodes());")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // info.addStringPermissions(userPrincipal.getPermissionsCode());")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," info;")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 认证")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"@param"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," authenticationToken")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"@return")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"@throws"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthenticationException")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    protected"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthenticationInfo"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," doGetAuthenticationInfo"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"AuthenticationToken"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," authenticationToken"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"throws"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," AuthenticationException"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        if"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," (authenticationToken "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"instanceof"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," AuthToken) {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"            String"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," userName"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = ((AuthToken) authenticationToken)."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getUserName"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"            SysUser"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," user"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"sysUserMapper"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"findByUserName"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(userName);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"            if"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," (user != "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"null"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"                // 用于多个Realm时，单个Realm也能用，不影响，后面再说")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"                final"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," PrincipalCollection"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," principalCollection"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," SimplePrincipalCollection"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(user, "),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getName"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"());")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"            return"),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}}," new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," SimpleAuthenticationInfo"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(principalCollection,"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"user"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"getPassword"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"());")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"            }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"        }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," null"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 判断token类型是否允许")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Override")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," boolean"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," supports"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"AuthenticationToken"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," token"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},") {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," token "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"instanceof"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," AuthToken;")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),v=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"/**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," * 读取shiro的相关配置内容")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}}," */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"@"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Data")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"public"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," class"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," ShiroProperties"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 路径拦截规则")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    private"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," List"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"> "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"filterChainDefinitions"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 转成 key, value")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * key: 路径， value: 拦截规则")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"@return")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," Map"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"> "),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"filterChainDefinitionsToMap"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        Map"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"> "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"map"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," LinkedHashMap"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<>();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"        this"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"filterChainDefinitions"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"forEach"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(item "),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"->"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"            String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"[] "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"split"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"item"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"split"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'":"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"            map"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"put"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(split["),s("span",{style:{color:"#B5CEA8","--shiki-dark":"#B5CEA8"}},"0"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"], split["),s("span",{style:{color:"#B5CEA8","--shiki-dark":"#B5CEA8"}},"1"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"]);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"        });")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," map;")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),A=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"@"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Configuration")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"public"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," class"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," ShiroConfig"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Autowired")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    private"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," ShiroProperties"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," shiroProperties"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 配置SecurityManager")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Bean")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," DefaultWebSecurityManager"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," defaultWebSecurityManager"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"LoginRealm"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," loginRealm"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"){")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        DefaultWebSecurityManager"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," defaultWebSecurityManager"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," DefaultWebSecurityManager"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"        defaultWebSecurityManager"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"setRealm"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(loginRealm);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," defaultWebSecurityManager;")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 注入Realm")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Bean")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," LoginRealm"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," loginRealm"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(){")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}}," new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," LoginRealm"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"    /**")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     * 配置过滤器、拦截范围")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"     */")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Bean")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," ShiroFilterFactoryBean"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," shiroFilterFactoryBean"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"DefaultWebSecurityManager"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," securityManager"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"){")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        ShiroFilterFactoryBean"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," shiroFilterFactoryBean"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," ShiroFilterFactoryBean"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"        shiroFilterFactoryBean"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"setSecurityManager"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(securityManager);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // 设置自定义 auth 过滤器")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        Map"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Filter"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"> "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"filters"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," HashMap"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<>();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"        filters"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"put"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"auth"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," AuthFilter"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"());")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"        shiroFilterFactoryBean"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"setFilters"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(filters);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"        // 设置路径拦截规则")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"        Map"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"String"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"> "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"filterMap"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"new"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," LinkedHashMap"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"<>("),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"shiroProperties"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"filterChainDefinitionsToMap"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"());")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"        shiroFilterFactoryBean"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"."),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"setFilterChainDefinitionMap"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(filterMap);")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," shiroFilterFactoryBean;")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),E=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"@"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Configuration")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"public"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," class"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," ConfigBeanConfiguration"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," {")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"ConfigurationProperties"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"(prefix = "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"shiro"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    @"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}},"Bean")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"    public"),s("span",{style:{color:"#4EC9B0","--shiki-dark":"#4EC9B0"}}," ShiroProperties"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," shiroProperties"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"        return"),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}}," new"),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}}," ShiroProperties"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"();")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"    }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),m=e(`<h2 id="三、流程说明" tabindex="-1"><a class="header-anchor" href="#三、流程说明"><span>三、流程说明</span></a></h2><p>1、发起请求时首先根据配置文件中的路径拦截规则进行拦截</p><p>2、当执行登录时，首先根据用户输入内容创建Token</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> String</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> login</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">SysUser</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> req) {</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">    AuthToken</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> authToken</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">AuthToken</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">builder</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        .</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">userName</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">req</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getUserName</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">())</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        .</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">password</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">req</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getPassword</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">())</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        .</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">build</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">    SecurityUtils</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getSubject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">login</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(authToken);</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">    String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> token</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">UUID</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">randomUUID</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">toString</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">replaceAll</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;-&quot;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">    LoginUtil</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">add</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(token);</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">    return</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> token;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>当执行<code>SecurityUtils.getSubject().login(authToken);</code>时，会携带我们创建的Token调用自定义<code>Realm</code>进行认证</li><li>认证失败会抛出异常，认证成功会将用户信息保存</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">// user就是保存的用户信息，接收Object类型</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">final</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> PrincipalCollection</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> principalCollection</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> SimplePrincipalCollection</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(user, </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getName</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">            return</span><span style="color:#C586C0;--shiki-dark:#C586C0;"> new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> SimpleAuthenticationInfo</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(principalCollection,</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">user</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getPassword</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">());</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>调用<code>SecurityUtils.getSubject().getPrincipal();</code>获取的就是我们上面保存的信息，根据Session区分，SessionId保存在Cookie中</li></ul><div class="hint-container tip"><p class="hint-container-title">登出</p><p>登出时直接调用<code>SecurityUtils.getSubject().logout();</code>，然后清理一下自己保存在<code>Redis</code>之类的信息即可</p></div><h2 id="四、多realm配置" tabindex="-1"><a class="header-anchor" href="#四、多realm配置"><span>四、多Realm配置</span></a></h2><p>修改<code>ShiroConfig</code>类，添加<code>ModularRealmAuthenticator</code> 对象</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">@</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Configuration</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> class</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> ShiroConfig</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    @</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Autowired</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    private</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> ShiroProperties</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> shiroProperties</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 配置SecurityManager</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    @</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> DefaultWebSecurityManager</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> defaultWebSecurityManager</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">LoginRealm</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> loginRealm</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">){</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        DefaultWebSecurityManager</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> defaultWebSecurityManager</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> DefaultWebSecurityManager</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">        // 存入认证对象</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        defaultWebSecurityManager</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">setAuthenticator</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">modularRealmAuthenticator</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        defaultWebSecurityManager</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">setRealm</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(loginRealm);</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> defaultWebSecurityManager;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    </span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 配置多Realm策略</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> ModularRealmAuthenticator</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> modularRealmAuthenticator</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        ModularRealmAuthenticator</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> modularRealmAuthenticator</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> ModularRealmAuthenticator</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        modularRealmAuthenticator</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">setAuthenticationStrategy</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> AllSuccessfulStrategy</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> modularRealmAuthenticator;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 注入Realm</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    @</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> LoginRealm</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> loginRealm</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(){</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#C586C0;--shiki-dark:#C586C0;"> new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> LoginRealm</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 配置过滤器、拦截范围</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    @</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Bean</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> ShiroFilterFactoryBean</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> shiroFilterFactoryBean</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">DefaultWebSecurityManager</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> securityManager</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">){</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        ShiroFilterFactoryBean</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> shiroFilterFactoryBean</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> ShiroFilterFactoryBean</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        shiroFilterFactoryBean</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">setSecurityManager</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(securityManager);</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">        // 设置自定义 auth 过滤器</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        Map</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Filter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">filters</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> HashMap</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        filters</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">put</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;auth&quot;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> AuthFilter</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        shiroFilterFactoryBean</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">setFilters</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(filters);</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">        // 设置路径拦截规则</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        Map</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">filterMap</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#C586C0;--shiki-dark:#C586C0;">new</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> LinkedHashMap</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;&gt;(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">shiroProperties</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">filterChainDefinitionsToMap</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">());</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        shiroFilterFactoryBean</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">setFilterChainDefinitionMap</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(filterMap);</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> shiroFilterFactoryBean;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>AtLeastOneSuccessfulStrategy</code>：只要有一个（或更多）的 <code>Realm</code> 验证成功，那么认证将视为成功（默认）</li><li><code>FirstSuccessfulStrategy</code>：第一个 <code>Realm</code> 验证成功，整体认证将视为成功，且后续 <code>Realm</code> 将被忽略</li><li><code>AllSuccessfulStrategy</code>：所有 <code>Realm</code> 成功，认证才视为成功</li></ul><h2 id="五、principalcollection" tabindex="-1"><a class="header-anchor" href="#五、principalcollection"><span>五、PrincipalCollection</span></a></h2><p>用于多Realm情况</p><p>当我们有多个自定义Realm时，因为每个Realm中都保存了一个当前用户信息，通过该接口可指定获取哪个Realm存的信息，默认返回第一条，但是其内部是Map存储，也就相当于是随机返回一个了</p><h3 id="_1、principalcollection" tabindex="-1"><a class="header-anchor" href="#_1、principalcollection"><span>1、PrincipalCollection</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> interface</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> PrincipalCollection</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> extends</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> Iterable</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Serializable</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>核心方法</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 获取首要principal</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Object</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> getPrimaryPrincipal</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 获取满足指定类型的首个Principal</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;T&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">T</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> oneByType</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;T&gt; type);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 获取满足指定类型的所有principal</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;T&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Collection</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;T&gt; </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">byType</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;T&gt; type);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 将principal集合以List形式返回</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">List</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> asList</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 将principal集合以Set形式返回</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Set</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> asSet</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 获取来自指定Realm的principal集合</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Collection</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> fromRealm</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> realmName);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 获取Realm的集合</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Set</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;String&gt; </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getRealmNames</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * principal集合是否为空</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">boolean</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> isEmpty</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、mutableprincipalcollection" tabindex="-1"><a class="header-anchor" href="#_2、mutableprincipalcollection"><span>2、MutablePrincipalCollection</span></a></h3><p>扩展<code>PrincipalCollection</code>接口，支持修改</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> interface</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> MutablePrincipalCollection</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> extends</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> PrincipalCollection</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>核心方法</strong></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 增加principal</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> add</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Object</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> principal, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> realmName);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 增加principal集合</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> addAll</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Collection</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> principals, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> realmName);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 增加principalCollection</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> addAll</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">PrincipalCollection</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> principals);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">/**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> * 清空所有principal</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"> */</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> clear</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、simpleprincipalcollection" tabindex="-1"><a class="header-anchor" href="#_3、simpleprincipalcollection"><span>3、SimplePrincipalCollection</span></a></h3><p><code>MutablePrincipalCollection</code>的简单实现，内部使用<code>LinkedHashMap</code>存储<code>Principal</code></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> class</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> SimplePrincipalCollection</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> implements</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> MutablePrincipalCollection</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4、principalmap" tabindex="-1"><a class="header-anchor" href="#_4、principalmap"><span>4、PrincipalMap</span></a></h3><p>扩展<code>PrincipalCollection</code>接口，支持根据<code>realmName</code>和<code>principalName</code>查找<code>Principal</code>，内部使用<code>HashMap</code>存储来自不同<code>Realm</code>的所有<code>Principal</code></p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> interface</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> PrincipalMap</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> extends</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> PrincipalCollection</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Map</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Object</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5、simpleprincipalmap" tabindex="-1"><a class="header-anchor" href="#_5、simpleprincipalmap"><span>5、SimplePrincipalMap</span></a></h3><p><code>PrincipalMap</code>的默认实现</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> class</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> SimplePrincipalMap</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> implements</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> PrincipalMap</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="六、其它说明" tabindex="-1"><a class="header-anchor" href="#六、其它说明"><span>六、其它说明</span></a></h2><p>默认情况下：</p><ul><li><p>如果要在过滤器中获得请求ID，需要使用<code>String requestedSessionId = ((ShiroHttpServletRequest) request).getRequestedSessionId();</code>获取，否则获取到的SessionId与Cookie关联的不同</p></li><li><p><code>Shiro</code>使用<code>Session + Cookie</code> 判断当前登录用户，<code>Session</code>有效期默认30分</p></li><li><p><code>Shiro</code>会在每次请求时调用<code>touch()</code>方法刷新<code>Session</code>有效期</p></li><li><p>可以调用<code>stop()</code>方法强制清除<code>Session</code>（踢下线）</p></li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">// false：表示获取不到返回null</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">// true：获取不到创建信的session</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Session</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> session</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">SecurityUtils</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getSubject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getSession</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#569CD6;--shiki-dark:#569CD6;">false</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">if</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (session != </span><span style="color:#569CD6;--shiki-dark:#569CD6;">null</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">    session</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">stop</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(); </span><span style="color:#6A9955;--shiki-dark:#6A9955;">// 踢下线，logout时会自动调用</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">    session</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">touch</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(); </span><span style="color:#6A9955;--shiki-dark:#6A9955;">// 刷新session有效期，每次请求自动调用</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>但是<code>Shiro</code>并没有提供根据<code>SessionId</code>获取<code>Session</code>的方法，可以使用 <code>Spring</code>的<code>SessionRepository</code></p></div>`,38);function b(B,F){const r=o("CodeTabs");return p(),c("div",null,[t,k(r,{id:"68",data:[{id:"application.yaml"},{id:"AuthToken"},{id:"AuthFilter"},{id:"LoginRealm"},{id:"ShiroProperties"},{id:"ShiroConfig"},{id:"ConfigBeanConfiguration"}]},{title0:i(({value:l,isActive:n})=>[a("application.yaml")]),title1:i(({value:l,isActive:n})=>[a("AuthToken")]),title2:i(({value:l,isActive:n})=>[a("AuthFilter")]),title3:i(({value:l,isActive:n})=>[a("LoginRealm")]),title4:i(({value:l,isActive:n})=>[a("ShiroProperties")]),title5:i(({value:l,isActive:n})=>[a("ShiroConfig")]),title6:i(({value:l,isActive:n})=>[a("ConfigBeanConfiguration")]),tab0:i(({value:l,isActive:n})=>[C]),tab1:i(({value:l,isActive:n})=>[h]),tab2:i(({value:l,isActive:n})=>[y]),tab3:i(({value:l,isActive:n})=>[u]),tab4:i(({value:l,isActive:n})=>[v]),tab5:i(({value:l,isActive:n})=>[A]),tab6:i(({value:l,isActive:n})=>[E]),_:1},8,["data"]),m])}const S=D(d,[["render",b],["__file","BaseIntegrate.html.vue"]]),f=JSON.parse('{"path":"/Use/Java/Shiro/BaseIntegrate.html","title":"SpringBoot前后端分离整合","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"一、Shiro提供的过滤器","slug":"一、shiro提供的过滤器","link":"#一、shiro提供的过滤器","children":[]},{"level":2,"title":"二、整合","slug":"二、整合","link":"#二、整合","children":[]},{"level":2,"title":"三、流程说明","slug":"三、流程说明","link":"#三、流程说明","children":[]},{"level":2,"title":"四、多Realm配置","slug":"四、多realm配置","link":"#四、多realm配置","children":[]},{"level":2,"title":"五、PrincipalCollection","slug":"五、principalcollection","link":"#五、principalcollection","children":[{"level":3,"title":"1、PrincipalCollection","slug":"_1、principalcollection","link":"#_1、principalcollection","children":[]},{"level":3,"title":"2、MutablePrincipalCollection","slug":"_2、mutableprincipalcollection","link":"#_2、mutableprincipalcollection","children":[]},{"level":3,"title":"3、SimplePrincipalCollection","slug":"_3、simpleprincipalcollection","link":"#_3、simpleprincipalcollection","children":[]},{"level":3,"title":"4、PrincipalMap","slug":"_4、principalmap","link":"#_4、principalmap","children":[]},{"level":3,"title":"5、SimplePrincipalMap","slug":"_5、simpleprincipalmap","link":"#_5、simpleprincipalmap","children":[]}]},{"level":2,"title":"六、其它说明","slug":"六、其它说明","link":"#六、其它说明","children":[]}],"git":{"createdTime":1709625510000,"updatedTime":1709884236000,"contributors":[{"name":"zhanglinwei","email":"3498729975@qq.com","commits":2}]},"readingTime":{"minutes":6.51,"words":1953},"filePathRelative":"Use/Java/Shiro/BaseIntegrate.md","localizedDate":"2024年3月5日"}');export{S as comp,f as data};
