import{_ as s,o as a,c as n,a as i}from"./app-Vg0IViah.js";const l={},D=i(`<h1 id="redis工具类" tabindex="-1"><a class="header-anchor" href="#redis工具类"><span>Redis工具类</span></a></h1><details class="hint-container details"><summary>详情</summary><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">//Redis操作</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">//JSON序列化器使用的是 阿里的</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">@</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Slf4j</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">@</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Component</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">public</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> class</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> RedisConfig</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    @</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Autowired</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    private</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> StringRedisTemplate</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    private</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> final</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> DEFAULT_KEY_PREFIX</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;&quot;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    private</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> final</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> int</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> EXPIRE_TIME</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;">1</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    private</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> final</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> TimeUnit</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> EXPIRE_TIME_TYPE</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">TimeUnit</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">DAYS</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 数据缓存至redis</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@return</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> add</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        try</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">            if</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (value != </span><span style="color:#569CD6;--shiki-dark:#569CD6;">null</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">                redisTemplate</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">                        .</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">opsForValue</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">                        .</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">set</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(DEFAULT_KEY_PREFIX + key, </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">JSON</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">toJSONString</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(value));</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">            }</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">catch</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Exception</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> e</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">            log</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">error</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">e</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getMessage</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(), e);</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">            throw</span><span style="color:#C586C0;--shiki-dark:#C586C0;"> new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> RuntimeException</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;数据缓存至redis失败&quot;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 数据缓存至redis并设置过期时间</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@return</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> add</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">long</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> timeout</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">TimeUnit</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> unit</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        try</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">            if</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (value != </span><span style="color:#569CD6;--shiki-dark:#569CD6;">null</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">                redisTemplate</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">                        .</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">opsForValue</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">                        .</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">set</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(DEFAULT_KEY_PREFIX + key, </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">JSON</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">toJSONString</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(value), timeout, unit);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">            }</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">catch</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Exception</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> e</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">            log</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">error</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">e</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getMessage</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(), e);</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">            throw</span><span style="color:#C586C0;--shiki-dark:#C586C0;"> new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> RuntimeException</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;数据缓存至redis失败&quot;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 写入 hash-set,已经是key-value的键值，不能再写入为hash-set</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#6A9955;--shiki-dark:#6A9955;">    must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> subKey</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#6A9955;--shiki-dark:#6A9955;">  写入的值</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">SK</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> addHashCache</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">SK</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> subKey</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">opsForHash</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">put</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(DEFAULT_KEY_PREFIX + key, subKey, value);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 写入 hash-set,并设置过期时间</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#6A9955;--shiki-dark:#6A9955;">    must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> subKey</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#6A9955;--shiki-dark:#6A9955;">  写入的值</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">SK</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> addHashCache</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">SK</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> subKey</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">long</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> timeout</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">TimeUnit</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> unit</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">opsForHash</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">put</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(DEFAULT_KEY_PREFIX + key, subKey, value);</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">expire</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(DEFAULT_KEY_PREFIX + key, timeout, unit);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 获取 hash-setvalue</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#6A9955;--shiki-dark:#6A9955;">    must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> subKey</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">SK</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Object</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> getHashCache</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">SK</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> subKey</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">  redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">opsForHash</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">get</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(DEFAULT_KEY_PREFIX + key, subKey);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 从redis中获取缓存数据，转成对象</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#6A9955;--shiki-dark:#6A9955;">   must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> clazz</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> 对象类型</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@return</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> getObject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">clazz</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#569CD6;--shiki-dark:#569CD6;">this</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">get</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key);</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        V</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> result</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#569CD6;--shiki-dark:#569CD6;">null</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        if</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (!</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">StringUtils</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">isEmpty</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(value)) {</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">            result = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">JSONObject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">parseObject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(value, clazz);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> result;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 从redis中获取缓存数据，转成list</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#6A9955;--shiki-dark:#6A9955;">   must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> clazz</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> 对象类型</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@return</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">List</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getList</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Class</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">clazz</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#569CD6;--shiki-dark:#569CD6;">this</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">get</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key);</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        List</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">V</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">result</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">Collections</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">emptyList</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">();</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        if</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (!</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">StringUtils</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">isEmpty</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(value)) {</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">            result = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">JSONArray</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">parseArray</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(value, clazz);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> result;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 功能描述：Get the value of {@code key}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     *</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@param</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> must not be {@literal null}.</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * </span><span style="color:#569CD6;--shiki-dark:#569CD6;">@return</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> java.lang.String</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * @date 2021/9/19</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     **/</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> &lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> get</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">K</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">        String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        try</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">            value = </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">opsForValue</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">().</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">get</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(DEFAULT_KEY_PREFIX + key);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">catch</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> (</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Exception</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> e</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">            log</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">error</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">e</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getMessage</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(), e);</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">            throw</span><span style="color:#C586C0;--shiki-dark:#C586C0;"> new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> RuntimeException</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&quot;从redis缓存中获取缓存数据失败&quot;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> value;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 删除key</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> delete</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">delete</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 批量删除key</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> void</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> delete</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Collection</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&gt; </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">keys</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">        redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">delete</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(keys);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 序列化key</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> byte</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">[] </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">dump</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">dump</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 是否存在key</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> Boolean</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> hasKey</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">hasKey</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 设置过期时间</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> Boolean</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> expire</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">long</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> timeout</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">TimeUnit</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> unit</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">expire</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key, timeout, unit);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 设置过期时间</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> Boolean</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> expireAt</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">Date</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> date</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">expireAt</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key, date);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 移除 key 的过期时间，key 将持久保持</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> Boolean</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> persist</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">persist</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 返回 key 的剩余的过期时间</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> Long</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> getExpire</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">TimeUnit</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> unit</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getExpire</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key, unit);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">    /**</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     * 返回 key 的剩余的过期时间</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">     */</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">    public</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;"> Long</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> getExpire</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#4EC9B0;--shiki-dark:#4EC9B0;">String</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> key</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">        return</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> redisTemplate</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">getExpire</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(key);</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,2),p=[D];function r(e,o){return a(),n("div",null,p)}const d=s(l,[["render",r],["__file","RedisUtil.html.vue"]]),c=JSON.parse('{"path":"/Use/Java/Redis/RedisUtil.html","title":"Redis工具类","lang":"zh-CN","frontmatter":{"order":10,"category":"使用篇"},"headers":[],"git":{"createdTime":1708330205000,"updatedTime":1708873062000,"contributors":[{"name":"zhanglinwei","email":"3498729975@qq.com","commits":2}]},"readingTime":{"minutes":2.22,"words":666},"filePathRelative":"Use/Java/Redis/RedisUtil.md","localizedDate":"2024年2月19日"}');export{d as comp,c as data};
