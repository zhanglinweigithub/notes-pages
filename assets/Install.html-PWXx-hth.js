import{_ as l,r as d,o as r,c as o,e as s,f as a,g as e,a as n}from"./app-Vg0IViah.js";const t="/notes-pages/assets/image-20230507115849505-C0ZSjx30.png",c="/notes-pages/assets/image-20230507120121983-C-QJWeQS.png",p="/notes-pages/assets/image-20230507120200417-CXSYG3UC.png",k="/notes-pages/assets/image-20230507121021117-DXrf_CCZ.png",h="/notes-pages/assets/image-20230507121145417-Bxovjwt8.png",D="/notes-pages/assets/image-20230507121203016-CtHz4tz-.png",C="/notes-pages/assets/image-20231128205608716-BQLYvkXF.png",u="/notes-pages/assets/image-20231128205753426-CYqUVsBo.png",v="/notes-pages/assets/image-20231128205906192-u-ZDZjLO.png",E="/notes-pages/assets/image-20231128212551968-DHoLjaLb.png",m={},b=n('<h1 id="redis安装" tabindex="-1"><a class="header-anchor" href="#redis安装"><span>Redis安装</span></a></h1><h2 id="一、windows安装redis" tabindex="-1"><a class="header-anchor" href="#一、windows安装redis"><span>一、Windows安装Redis</span></a></h2><h3 id="_1、下载" tabindex="-1"><a class="header-anchor" href="#_1、下载"><span>1、下载</span></a></h3>',3),g={href:"https://github.com/MicrosoftArchive/redis/releases",target:"_blank",rel:"noopener noreferrer"},A=s("li",null,[a("百度网盘下载地址：https://pan.baidu.com/s/1PDYbR7PSdHNac2djSPuTRQ 提取码："),s("code",null,"tilq")],-1),y=n(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>百度网盘失效的话，就老老实实从GitHub下载吧</p></div><h3 id="_2、安装" tabindex="-1"><a class="header-anchor" href="#_2、安装"><span>2、安装</span></a></h3><p>将下载好的 <code>Redis</code> 解压到单独目录，== 安装路径最好不要出现中文和空格 ==</p><h3 id="_3、命令行启动" tabindex="-1"><a class="header-anchor" href="#_3、命令行启动"><span>3、命令行启动</span></a></h3><p>打开 <code>CMD</code> 进入 <code>Redis</code> 文件目录，运行如下命令，即可启动 <code>Redis</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-server</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis.windows.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+t+`" alt="image-20230507115849505" tabindex="0" loading="lazy"><figcaption>image-20230507115849505</figcaption></figure><h3 id="_4、windows服务启动" tabindex="-1"><a class="header-anchor" href="#_4、windows服务启动"><span>4、Windows服务启动</span></a></h3><p>部署 <code>Redis</code> 为 <code>windows</code> 下的服务</p><ol><li>关闭上一个 <code>CMD</code> 窗口，打开一个新的 <code>CMD</code> 窗口，输入如下命令</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-server</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> --service-install</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis.windows.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+c+'" alt="image-20230507120121983" tabindex="0" loading="lazy"><figcaption>image-20230507120121983</figcaption></figure><ol start="2"><li>启动<code>Redis</code>服务，进入服务里，找到<code>Redis</code>服务进行启动</li></ol><figure><img src="'+p+`" alt="image-20230507120200417" tabindex="0" loading="lazy"><figcaption>image-20230507120200417</figcaption></figure><div class="hint-container tip"><p class="hint-container-title">服务</p><p>右击我的电脑 ==&gt; 管理 ==&gt; 服务和应用程序 ==&gt; 服务</p></div><ol start="3"><li>测试</li></ol><p>打开<code>cmd</code>，输入以下命令</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-cli.exe</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">set</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> name</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> hello</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">get</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> name</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">keys</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> *</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><code>Redis</code>使用</li></ol><p>卸载服务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-server</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> --service-uninstall</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>开启服务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-server</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> --service-start</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>停止服务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-server</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> --service-stop</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>开启远程访问</li></ol><p>由于<code>Redis</code>默认只允许本地访问，要使<code>Redis</code>可以远程访问，需修改<code>redis</code>对应的配置文件</p><p>我使用的<code>Redis</code>版本为：<code>redis 3.2</code> ，默认使用的是<code>redis.windows.conf</code></p><div class="hint-container tip"><p class="hint-container-title">查看 \`Redis\` 版本信息</p><p>先启动 <code>Redis</code> 服务，再使用<code>redis-cli.exe</code>启动客户端，然后在客户端中输入 <code>info</code> 命令即可查看</p></div><p>（1）确认<code>redis</code>服务运行的配置文件，查找<code>redis</code>服务</p><figure><img src="`+k+'" alt="image-20230507121021117" tabindex="0" loading="lazy"><figcaption>image-20230507121021117</figcaption></figure><p>（2）修改两个地方即可：</p><ul><li>注释掉本地连接对应的 <code>bind 127.0.0.1</code></li></ul><figure><img src="'+h+'" alt="image-20230507121145417" tabindex="0" loading="lazy"><figcaption>image-20230507121145417</figcaption></figure><ul><li>将<code>redis</code>默认的守护关闭，修改<code>protected-mode yes</code> 为 <code>protected-mode no</code></li></ul><figure><img src="'+D+'" alt="image-20230507121203016" tabindex="0" loading="lazy"><figcaption>image-20230507121203016</figcaption></figure><ul><li>修改完成，保存重启 <code>Redis</code> 服务</li></ul><h2 id="二、linux安装redis" tabindex="-1"><a class="header-anchor" href="#二、linux安装redis"><span>二、Linux安装Redis</span></a></h2><p><code>Redis</code>默认安装路径：<code>/usr/local/bin</code></p><h3 id="_1、下载上传" tabindex="-1"><a class="header-anchor" href="#_1、下载上传"><span>1、下载上传</span></a></h3><p>自行下载需要安装的版本</p>',41),x=s("code",null,"Redis",-1),_={href:"https://redis.io/",target:"_blank",rel:"noopener noreferrer"},f={href:"http://download.redis.io/releases",target:"_blank",rel:"noopener noreferrer"},w=n(`<p>本例：<code>redis-7.0.5.tar.gz</code></p><p>下载之后将文件上传至Linux服务器，一般放在<code>/opt</code>目录下</p><h3 id="_2、安装所需依赖" tabindex="-1"><a class="header-anchor" href="#_2、安装所需依赖"><span>2、安装所需依赖</span></a></h3><p><strong>1）解压</strong></p><p>进入<code>Redis</code>压缩包目录，解压</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">tar</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> zxvf</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis-7.0.5.tar.gz</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>2）安装依赖</strong></p><p>因为<code>Redis</code>是基于C语言的，需要安装<code>gcc</code>依赖</p><p>进入解压出来的文件、安装<code>gcc</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">cd</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis-7.0.5</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">yum</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> install</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> gcc-c++</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 查看gcc版本</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> gcc</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> -v</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+C+`" alt="image-20231128205608716" tabindex="0" loading="lazy"><figcaption>image-20231128205608716</figcaption></figure><p>输入<code>make</code>命令配置gcc需要的文件</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">make</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行成功后：</p><figure><img src="`+u+`" alt="image-20231128205753426" tabindex="0" loading="lazy"><figcaption>image-20231128205753426</figcaption></figure><p>在次进行<code>make</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">make</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>确认所有都安装完成</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">make</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> install</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+v+`" alt="image-20231128205906192" tabindex="0" loading="lazy"><figcaption>image-20231128205906192</figcaption></figure><p><strong>3）复制配置文件</strong></p><p><code>Redis</code>默认安装路径：<code>/usr/local/bin</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">cd</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> /usr/local/bin</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">mkdir</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redisconfig</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">cp</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> /opt/redis-7.0.5/redis.conf</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redisconfig</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>之后就是用这个文件启动</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>给自己留条后路，别动原来的配置文件</p><p>听话！！！复制一份新的！！！</p></div><h3 id="_3、修改配置" tabindex="-1"><a class="header-anchor" href="#_3、修改配置"><span>3、修改配置</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">cd</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redisconfig</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">vi</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>修改如下内容</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">bind</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 0.0</span><span style="color:#CE9178;--shiki-dark:#CE9178;">.0.0</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 守护进程，修改为yes后即可后台运行</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">daemonize</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> yes</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> </span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 密码，设置后访问Redis必须输入密码</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">requirepass</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 123456</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 其它配置自行选择配置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 监听的端口</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">port</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 6379</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">dir</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> .</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">databases</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 1</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 设置redis能够使用的最大内存</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">maxmemory</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 512</span><span style="color:#CE9178;--shiki-dark:#CE9178;">mb</span></span>
<span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">logfile</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &quot;redis.log&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>生产环境不要设置为<code>0.0.0.0</code>！！！</p></div><h3 id="_4、redis-cli-连接测试" tabindex="-1"><a class="header-anchor" href="#_4、redis-cli-连接测试"><span>4、redis-cli 连接测试</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">cd</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> /usr/local/bin</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-cli</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> -p</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 6379</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>若设置了登录密码则需要认证</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">127.0.0.1:6379&gt;</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> auth</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> 你的密码</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>关闭<code>redis</code>服务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">127.0.0.1:6379&gt;</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> shutdown</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5、设置redis开机自启" tabindex="-1"><a class="header-anchor" href="#_5、设置redis开机自启"><span>5、设置Redis开机自启</span></a></h3><div class="hint-container tip"><p class="hint-container-title">提示</p><p>指定配置文件启动<code>Redis</code></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">cd</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> /usr/local/bin</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-server</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redisconfig/redis.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><p><strong>1）创建<code>redis.service</code>文件</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">vi</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> /etc/systemd/system/redis.service</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>2）添加如下内容</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">[Unit]</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">Description</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">Redis</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">After</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">network.target</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">[Service]</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">Type</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">forking</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">ExecStart</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">/usr/bin/redis-server</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> /usr/local/redis/config/redis.conf</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> # 重要</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">ExecStop</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">/usr/bin/redis-server</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> -s</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> stop</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">PrivateTmp</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#569CD6;--shiki-dark:#569CD6;">true</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">User</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">root</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">Group</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">root</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">[Install]</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">WantedBy</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#CE9178;--shiki-dark:#CE9178;">multi-user.target</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p><code>ExecStart</code>处指定了<code>redis-server</code>的配置文件，== 根据自己刚复制的配置文件路径进行配置 ==</p></div><p><strong>3）重载系统服务</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">systemctl</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> daemon-reload</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>4）常用命令</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">systemctl</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> start</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> 	# 启动redis</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">systemctl</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> stop</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> 	# 关闭redis</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">systemctl</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> enable</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis</span><span style="color:#6A9955;--shiki-dark:#6A9955;">  # 设置开机自启</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">systemctl</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> disable</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis</span><span style="color:#6A9955;--shiki-dark:#6A9955;"> # 关闭开机自启</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">systemctl</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> status</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> redis</span><span style="color:#6A9955;--shiki-dark:#6A9955;">  # 查看运行状态</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>要先执行一下 <code>systemctl enable redis</code> 才会设置开机自启，不要忘了</p></div><p><strong>5）性能测试</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-benchmark</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> [option] [option value]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>选项</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td>-h</td><td>指定服务器主机名</td><td>127.0.0.1</td></tr><tr><td>-p</td><td>指定服务器端口</td><td>6379</td></tr><tr><td>-s</td><td>指定服务器 socket</td><td></td></tr><tr><td>-c</td><td>指定并发连接数</td><td>50</td></tr><tr><td>-n</td><td>指定请求数</td><td>10000</td></tr><tr><td>-d</td><td>以字节的形式指定 SET/GET 值的数据大小</td><td>2</td></tr><tr><td>-k</td><td>1=keep alive 0=reconnect</td><td>1</td></tr><tr><td>-r</td><td>SET/GET/INCR 使用随机 key, SADD 使用随机值</td><td></td></tr><tr><td>-P</td><td>通过管道传输 请求</td><td>1</td></tr><tr><td>-q</td><td>强制退出 redis。仅显示 query/sec 值</td><td></td></tr><tr><td>-csv</td><td>以 CSV 格式输出</td><td></td></tr><tr><td>-l (小写 L)</td><td>生成循环，永久执行测试</td><td></td></tr><tr><td>-t</td><td>仅运行以逗号分隔的测试命令列表</td><td></td></tr><tr><td>-I (大写 i)</td><td>Idle 模式。仅打开 N 个 idle 连接并等待</td><td></td></tr></tbody></table><p>测试100个并发链接，每个并发100000请求</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">cd</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> /usr/local/bin</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">redis-benchmark</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> -h</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> localhost</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> -p</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 6379</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> -c</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 100</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> -n</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;"> 100000</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+E+'" alt="image-20231128212551968" tabindex="0" loading="lazy"><figcaption>image-20231128212551968</figcaption></figure>',54);function R(B,z){const i=d("ExternalLinkIcon");return r(),o("div",null,[b,s("ul",null,[s("li",null,[a("Github下载地址："),s("a",g,[a("https://github.com/MicrosoftArchive/redis/releases"),e(i)])]),A]),y,s("ul",null,[s("li",null,[x,a("官网："),s("a",_,[a("https://redis.io/"),e(i)])]),s("li",null,[a("历史版本："),s("a",f,[a("http://download.redis.io/releases"),e(i)])])]),w])}const S=l(m,[["render",R],["__file","Install.html.vue"]]),I=JSON.parse('{"path":"/Use/Java/Redis/Install.html","title":"Redis安装","lang":"zh-CN","frontmatter":{"order":2,"category":"使用篇"},"headers":[{"level":2,"title":"一、Windows安装Redis","slug":"一、windows安装redis","link":"#一、windows安装redis","children":[{"level":3,"title":"1、下载","slug":"_1、下载","link":"#_1、下载","children":[]},{"level":3,"title":"2、安装","slug":"_2、安装","link":"#_2、安装","children":[]},{"level":3,"title":"3、命令行启动","slug":"_3、命令行启动","link":"#_3、命令行启动","children":[]},{"level":3,"title":"4、Windows服务启动","slug":"_4、windows服务启动","link":"#_4、windows服务启动","children":[]}]},{"level":2,"title":"二、Linux安装Redis","slug":"二、linux安装redis","link":"#二、linux安装redis","children":[{"level":3,"title":"1、下载上传","slug":"_1、下载上传","link":"#_1、下载上传","children":[]},{"level":3,"title":"2、安装所需依赖","slug":"_2、安装所需依赖","link":"#_2、安装所需依赖","children":[]},{"level":3,"title":"3、修改配置","slug":"_3、修改配置","link":"#_3、修改配置","children":[]},{"level":3,"title":"4、redis-cli 连接测试","slug":"_4、redis-cli-连接测试","link":"#_4、redis-cli-连接测试","children":[]},{"level":3,"title":"5、设置Redis开机自启","slug":"_5、设置redis开机自启","link":"#_5、设置redis开机自启","children":[]}]}],"git":{"createdTime":1708330205000,"updatedTime":1708873062000,"contributors":[{"name":"zhanglinwei","email":"3498729975@qq.com","commits":2}]},"readingTime":{"minutes":4.5,"words":1350},"filePathRelative":"Use/Java/Redis/Install.md","localizedDate":"2024年2月19日"}');export{S as comp,I as data};
