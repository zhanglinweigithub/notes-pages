import{_ as p,r as e,o as d,c as k,e as s,f as a,g as r,w as i,a as c}from"./app-Vg0IViah.js";const t={},C=s("h1",{id:"provide-inject",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#provide-inject"},[s("span",null,"Provide & Inject")])],-1),h={href:"https://cn.vuejs.org/guide/components/provide-inject.html",target:"_blank",rel:"noopener noreferrer"},y=c(`<ul><li><code>Provide</code>：提供方</li><li><code>Inject</code>：注入方</li></ul><h2 id="一、provide" tabindex="-1"><a class="header-anchor" href="#一、provide"><span>一、Provide</span></a></h2><h3 id="_1、组件中提供" tabindex="-1"><a class="header-anchor" href="#_1、组件中提供"><span>1、组件中提供</span></a></h3><p>要为组件后代提供数据，需要使用到 <code>provide()</code> 函数</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> setup</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">import</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">from</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;message&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;hello!&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第一个参数：注入名，后代组件会用注入名来查找期望注入的值。</li><li>第二个参数：提供的值，值可以是任意类型，包括响应式的状态</li></ul><blockquote><p>一个组件可以多次调用 <code>provide()</code>，使用不同的注入名，注入不同的依赖值。</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">import</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">ref</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">from</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;"> count</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">ref</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;">0</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;key&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">count</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>提供的响应式状态使后代组件可以由此和提供者建立响应式的联系</p></blockquote><h3 id="_2、应用层提供" tabindex="-1"><a class="header-anchor" href="#_2、应用层提供"><span>2、应用层提供</span></a></h3><p>还可以在整个应用层面提供依赖</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">import</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">createApp</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">from</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;"> app</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">createApp</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">({})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">app</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;message&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;hello!&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>在应用级别提供的数据在该应用内的所有组件中都可以注入</p></blockquote><h2 id="二、inject" tabindex="-1"><a class="header-anchor" href="#二、inject"><span>二、Inject</span></a></h2><h3 id="_1、组件中使用" tabindex="-1"><a class="header-anchor" href="#_1、组件中使用"><span>1、组件中使用</span></a></h3><p>要注入上层组件提供的数据，需使用 <code>inject()</code> 函数：</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> setup</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">import</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">inject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">from</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;"> message</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">inject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;message&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>如果提供的值是一个 ref，注入进来的会是该 ref 对象，而<strong>不会</strong>自动解包为其内部的值</p><p>这使得注入方组件能够通过 ref 对象保持了和供给方的响应性链接</p></div><h3 id="_2、注入默认值" tabindex="-1"><a class="header-anchor" href="#_2、注入默认值"><span>2、注入默认值</span></a></h3><p>如果该注入名没有任何组件提供，则会抛出一个运行时警告</p><p>如果在注入一个值时不要求必须有提供者，那么我们应该声明一个默认值</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> setup</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">inject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;message&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;这是默认值&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了避免在用不到默认值的情况下进行不必要的计算或产生副作用，可以使用工厂函数来创建默认值</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> setup</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;"> value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">inject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;key&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, () </span><span style="color:#569CD6;--shiki-dark:#569CD6;">=&gt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;"> new</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> ExpensiveClass</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(), </span><span style="color:#569CD6;--shiki-dark:#569CD6;">true</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>第三个参数表示默认值应该被当作一个工厂函数</p></blockquote><h2 id="三、和响应式数据配合使用" tabindex="-1"><a class="header-anchor" href="#三、和响应式数据配合使用"><span>三、和响应式数据配合使用</span></a></h2><p>当提供 / 注入响应式的数据时， <strong>建议尽可能将任何对响应式状态的变更都保持在供给方组件中</strong></p><p>如果需要在注入方组件中更改数据，推荐在供给方组件内声明并提供一个更改数据的方法函数，如下：</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">&lt;!-- 在供给方组件内 --&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> setup</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">import</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">ref</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">from</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;"> location</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">ref</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;North Pole&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">function</span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;"> updateLocation</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">  location</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">.</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">value</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;South Pole&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;location&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, {</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">  location</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">  updateLocation</span></span>
<span class="line"><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">})</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">&lt;!-- 在注入方组件 --&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> setup</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">import</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">inject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">from</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;">location</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;">updateLocation</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">inject</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;location&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">template</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">  &lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">button</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> @</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">click</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">=</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&quot;</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">updateLocation</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">&quot;</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">{{ </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">location</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> }}</span><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">button</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">template</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果想确保提供的数据不能被注入方的组件更改，你可以使用 <code>readonly()</code> 来包装提供的值</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="shiki shiki-themes dark-plus dark-plus" style="background-color:#1E1E1E;--shiki-dark-bg:#1E1E1E;color:#D4D4D4;--shiki-dark:#D4D4D4;" tabindex="0"><code><span class="line"><span style="color:#6A9955;--shiki-dark:#6A9955;">&lt;!-- 在供给方组件内 --&gt;</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;"> setup</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"><span style="color:#C586C0;--shiki-dark:#C586C0;">import</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> { </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">ref</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">readonly</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> } </span><span style="color:#C586C0;--shiki-dark:#C586C0;">from</span><span style="color:#CE9178;--shiki-dark:#CE9178;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;--shiki-dark:#569CD6;">const</span><span style="color:#4FC1FF;--shiki-dark:#4FC1FF;"> count</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;"> = </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">ref</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#B5CEA8;--shiki-dark:#B5CEA8;">0</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">provide</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#CE9178;--shiki-dark:#CE9178;">&#39;read-only-count&#39;</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">, </span><span style="color:#DCDCAA;--shiki-dark:#DCDCAA;">readonly</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">(</span><span style="color:#9CDCFE;--shiki-dark:#9CDCFE;">count</span><span style="color:#D4D4D4;--shiki-dark:#D4D4D4;">))</span></span>
<span class="line"><span style="color:#808080;--shiki-dark:#808080;">&lt;/</span><span style="color:#569CD6;--shiki-dark:#569CD6;">script</span><span style="color:#808080;--shiki-dark:#808080;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、使用-symbol-作注入名" tabindex="-1"><a class="header-anchor" href="#四、使用-symbol-作注入名"><span>四、使用 Symbol 作注入名</span></a></h2><p>如果应用内提供的依赖很多，建议最好使用 <code>Symbol</code> 来作为注入名以避免潜在的冲突</p>`,34),v=s("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"export"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," const"),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}}," KEY1"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"Symbol"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"()")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"export"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}}," const"),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}}," KEY2"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"Symbol"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"()")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),u=s("div",{class:"language-vue line-numbers-mode","data-ext":"vue","data-title":"vue"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},"<"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"script"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," setup"),s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},">")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"// 在供给方组件中")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"import"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," { "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"provide"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," } "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"from"),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}}," 'vue'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"import"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," { "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"KEY1"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"KEY2"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," } "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"from"),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}}," './keys.js'")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"provide"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}},"KEY1"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"zlw"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"provide"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}},"KEY2"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}},'"18"'),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},");")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},"</"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"script"),s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},">")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),E=s("div",{class:"language-vue line-numbers-mode","data-ext":"vue","data-title":"vue"},[s("pre",{class:"shiki shiki-themes dark-plus dark-plus",style:{"background-color":"#1E1E1E","--shiki-dark-bg":"#1E1E1E",color:"#D4D4D4","--shiki-dark":"#D4D4D4"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},"<"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"script"),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}}," setup"),s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},">")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955","--shiki-dark":"#6A9955"}},"// 注入方组件")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"import"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," { "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"inject"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"  } "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"from"),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}}," 'vue'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"import"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," { "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"KEY1"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},", "),s("span",{style:{color:"#9CDCFE","--shiki-dark":"#9CDCFE"}},"KEY2"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," } "),s("span",{style:{color:"#C586C0","--shiki-dark":"#C586C0"}},"from"),s("span",{style:{color:"#CE9178","--shiki-dark":"#CE9178"}}," './keys.js'")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"const"),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}}," KEY1Value"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"inject"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}},"KEY1"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"const"),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}}," KEY2Value"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}}," = "),s("span",{style:{color:"#DCDCAA","--shiki-dark":"#DCDCAA"}},"inject"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},"("),s("span",{style:{color:"#4FC1FF","--shiki-dark":"#4FC1FF"}},"KEY2"),s("span",{style:{color:"#D4D4D4","--shiki-dark":"#D4D4D4"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},"</"),s("span",{style:{color:"#569CD6","--shiki-dark":"#569CD6"}},"script"),s("span",{style:{color:"#808080","--shiki-dark":"#808080"}},">")]),a(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1);function m(F,b){const o=e("ExternalLinkIcon"),D=e("CodeTabs");return d(),k("div",null,[C,s("p",null,[s("a",h,[a("官方文档"),r(o)])]),y,r(D,{id:"121",data:[{id:"keys.js"},{id:"ProvideCom.vue"},{id:"InjectCom.vue"}]},{title0:i(({value:n,isActive:l})=>[a("keys.js")]),title1:i(({value:n,isActive:l})=>[a("ProvideCom.vue")]),title2:i(({value:n,isActive:l})=>[a("InjectCom.vue")]),tab0:i(({value:n,isActive:l})=>[v]),tab1:i(({value:n,isActive:l})=>[u]),tab2:i(({value:n,isActive:l})=>[E]),_:1},8,["data"])])}const g=p(t,[["render",m],["__file","Provide_Inject.html.vue"]]),_=JSON.parse('{"path":"/Use/Font/Vue3/Provide_Inject.html","title":"Provide & Inject","lang":"zh-CN","frontmatter":{"category":["使用篇"],"tag":["Vue3使用","Provide & Inject"]},"headers":[{"level":2,"title":"一、Provide","slug":"一、provide","link":"#一、provide","children":[{"level":3,"title":"1、组件中提供","slug":"_1、组件中提供","link":"#_1、组件中提供","children":[]},{"level":3,"title":"2、应用层提供","slug":"_2、应用层提供","link":"#_2、应用层提供","children":[]}]},{"level":2,"title":"二、Inject","slug":"二、inject","link":"#二、inject","children":[{"level":3,"title":"1、组件中使用","slug":"_1、组件中使用","link":"#_1、组件中使用","children":[]},{"level":3,"title":"2、注入默认值","slug":"_2、注入默认值","link":"#_2、注入默认值","children":[]}]},{"level":2,"title":"三、和响应式数据配合使用","slug":"三、和响应式数据配合使用","link":"#三、和响应式数据配合使用","children":[]},{"level":2,"title":"四、使用 Symbol 作注入名","slug":"四、使用-symbol-作注入名","link":"#四、使用-symbol-作注入名","children":[]}],"git":{"createdTime":1709384965000,"updatedTime":1709384965000,"contributors":[{"name":"zhanglinwei","email":"3498729975@qq.com","commits":1}]},"readingTime":{"minutes":2.71,"words":814},"filePathRelative":"Use/Font/Vue3/Provide&Inject.md","localizedDate":"2024年3月2日"}');export{g as comp,_ as data};
